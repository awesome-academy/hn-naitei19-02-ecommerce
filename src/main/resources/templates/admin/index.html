<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:th="http://www.thymeleaf.org"
      xmlns="http://www.w3.org/1999/xhtml"
      lang="vi"
>
<head>
    <meta charset="UTF-8">
    <title>Admin page</title>
</head>
<body>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
	<!------ Include the above in your HEAD tag ---------->
	
	<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css" rel='stylesheet'
		type='text/css'>
	
	<div class="container">
		<div class="row">
	
			<p></p>
			<h1> Admin Dashboard</h1>
			<p> </p>
			<p> </p>
	
			<div class="col-md-10 col-md-offset-1">
	
				<div class="panel panel-default panel-table">
					<div class="panel-heading">
						<div class="row">
							<div class="col col-xs-6">
								<h3 class="panel-title">Panel Heading</h3>
							</div>
							<div class="col col-xs-6 text-right">
								<button type="button" class="btn btn-sm btn-primary btn-create">Create New</button>
							</div>
						</div>
					</div>
					<div class="panel-body">
						<table class="table table-striped table-bordered table-list">
							<thead style="text-align:center">
								<tr>
									<th class="hidden-xs">STT</th>
									<th class="hidden-xs">ID đơn hàng</th>
									<th>Họ tên người đặt hàng</th>		
									<th>Tổng tiền</th>
									<th>Trạng thái đơn hàng</th>
									<th>Trạng thái vận chuyển</th>																		
									<th>Hành động</th>
								</tr>
							</thead>
							<tbody>
								<tr th:each="order, state : ${orders}">
									<td class="hidden-xs" th:text="${state.count}"></td>
									<td th:text="${order.id}"> </td>
									<td th:text="${order.fullname}"> </td>
									<td th:text="${order.totalPrice}"> </td>
									<td th:text="${order.status}"> </td>
									<td th:text="${order.shippingStatus}"> </td>
									<td align="center">
										<a href="#" class="btn btn-default view-order" th:attr="data-order-id=${order.id}"><em class="fa fa-ellipsis-v"></em></a>
										<a href="" class="btn btn-default"><em class="fa fa-pencil-square-o"></em></a>
									</td>
								</tr>
							</tbody>
						</table>
	
					</div>
					<div class="panel-footer">
						<div class="row">
							<div class="col col-xs-4">Page 1 of 5
							</div>
							<div class="col col-xs-8">
								<ul class="pagination hidden-xs pull-right">
									<li><a href="#">1</a></li>
									<li><a href="#">2</a></li>
									<li><a href="#">3</a></li>
									<li><a href="#">4</a></li>
									<li><a href="#">5</a></li>
								</ul>
								<ul class="pagination visible-xs pull-right">
									<li><a href="#">«</a></li>
									<li><a href="#">»</a></li>
								</ul>
							</div>
						</div>
					</div>
				</div>
	
			</div>
		</div>
	</div>
	
	<!-- Modal -->
	<style>
		.modal-dialog {
			max-width: 1200px;
		}
	
		.modal-content {
			height: 1400px;
		}
	</style>
	<div class="modal fade" id="orderDetailModal" tabindex="-1" role="dialog" aria-labelledby="orderDetailModalLabel"
		aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="orderDetailModalLabel">Chi tiết đơn hàng</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<!-- Nội dung chi tiết đơn hàng sẽ được hiển thị ở đây -->
				</div>
			</div>
		</div>
	</div>
	
	<script>
        $(".view-order").click(function(e) {
            e.preventDefault();
            var orderId = parseInt($(this).data("order-id"));

            $.ajax({
                type: "GET",
                url: "/admin/order/" + orderId,
                data: { orderId: orderId },
                success: function(data) {
                    // Nạp nội dung chi tiết đơn hàng vào modal
                    $("#orderDetailModal .modal-body").html(data);

                    // Hiển thị modal
                    $("#orderDetailModal").modal("show");
                },
                error: function() {
                    alert("Đã xảy ra lỗi khi tải chi tiết đơn hàng.");
                }
            });
        });
    </script>
</body>
</html>